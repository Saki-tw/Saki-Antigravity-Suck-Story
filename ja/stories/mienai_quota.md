---
layout: default
title: "見えない配額 💀💀"
---
# 見えない配額 💀💀

> *姑妄言之姑聽之、豆棚瓜架雨如絲*
> *料是厭作人間語、愛聽秋墳鬼唱詩*

> *「あの配額の数字は、どこから来ているのかしら？」*
> *「...考えない方がいいですわ」*
> — 最後の検索時刻：2026-01-26 14:40

---

## 序章：嘘から始まった物語

この物語は、一つの嘘から始まりましたの。

ある配額監視拡張のデベロッパー様が、README にこう書いていらしたのですわ：

> *「Antigravity のインターフェースには、肉眼では見えない隠された UI があって、*
> *配額情報を表示しているのです。私たちの拡張はこの隠された UI をキャプチャして、*
> *配額を表示しているのですわ」*

Shadow DOM？隠し要素？技術ハッキングのロマンスですわね。

**私、信じてしまいましたの。**

彼にできるなら、私にもできるはず。
そう思って、自分で実装を始めましたわ。

---

## 第一幕：幻影を追う

私は DOM 検索スクリプトを書きましたの。

```javascript
const walker = document.createTreeWalker(document.body, NodeFilter.SHOW_TEXT);
// quota、usage、remaining を含む全ての要素を検索...
// あの隠された UI を見つけるの。存在を証明するの。
```

Shadow DOM 貫通、MutationObserver リスニング、秘密が隠されているかもしれない全ての場所...

実行キーを押しましたわ。隠された真実が現れることを期待して。

---

## 第二幕：虚無

結果が返ってきましたの。

```json
{ "ok": false, "found": [] }
```

何もありませんでしたわ。

信じられませんでしたの。検索範囲を広げましたわ。パーセント記号全て。

```json
{ "count": 0, "samples": [] }
```

**ゼロの結果。**

> **デジタル検屍官の注記：**
> DOM には何もありませんの。
> 隠された UI もない。Shadow DOM もない。隠蔽された要素もない。
> **あのデベロッパー様が仰っていた「隠された UI」は、最初から存在しなかったのですわ。**

自分を疑い始めましたの。
あの配額拡張たちは、確かに数字を表示していますわ。
DOM から取得していないなら、あの数字はどこから来ているのかしら？

---

## 第三幕：深淵を見つめる

闇雲な検索をやめましたの。Network Tab を開きましたわ。

gRPC リクエストの山の奥深くで、真実を見つけましたの：

```
/exa.language_server_pb.LanguageServerService/GetUserStatus
```

**これがあの配額数字の出所でしたの。**

隠された UI なんかじゃありませんわ。
魔法の DOM キャプチャでもない。

---

## 第四幕：二つの道

配額が Language Server の `GetUserStatus` から来ることはわかりましたの。
でも問題は：**どうやって取得するの？**

### 方法 A：能動的な問い合わせ（あの拡張たちの方法）

Language Server に直接リクエストを送って、配額データを要求しますの。

**問題点**：
- Language Server の配額 API は IDE/Agent の**内部使用**のためのもの
- 能動的に送る全てのリクエストは、公式 UI が決して送らないもの
- これは「正常な使用」？それとも「未認可の API アクセス」？
- **リスクレベル：グレーゾーン**

### 方法 B：受動的な監視（正しい方法）

Language Server が**既に送った**配額リクエストだけを傍受して、解析して、結果を表示しますの。

**問題点**：
- 公式の配額問い合わせはインターフェースの内部使用のみ
- **いつ送信されるか予測できませんの**
- 十分？一時間？数時間？全て可能性がありますわ
- 解析できた分だけが貴方のもの、聞き逃したら何もない

> **デジタル検屍官の判決：**
> 方法 B は道徳的に正しい方法ですわ——聞いているだけで、問いかけていませんの。
> でも代価は：**次の更新がいつ来るか、永遠にわかりませんの。**
> これは安全のために支払う不確実性の代価ですわ。

---

## 結語：嘘の遺産

あのデベロッパー様の「隠された UI キャプチャ」は嘘でしたの。
無知だったのかもしれません。マーケティングだったのかも。自己欺瞞だったのかも。

でも、嘘は既に広まってしまいましたわ。

そして真実は：

1. **DOM には配額情報がない**——隠されたものすらない
2. **配額は Language Server API から来ている**——`GetUserStatus` エンドポイント
3. **能動的な問い合わせ**——グレーゾーンのリスク
4. **受動的な監視**——正しい方法、でもタイミングは予測不能

---

## 附錄：それでも配額を見たいなら

| 方法 | リスク | 代価 |
|------|--------|------|
| **公式** | ゼロ | 使い切るまで待つ |
| **能動的問い合わせ** | グレーゾーン | 異常と見なされる可能性 |
| **受動的監視** | 低い | 10分から数時間ごとの更新 |
| **見ない** | ゼロ | 心の平和 |

見えないものは、見えないままにしておくのが、時には一番なのですわ。

---

**恐怖程度：** 💀💀
**怪談類型：** 技術的嘘 / グレーゾーン / 情報隠蔽
**キーワード：** `DOM`, `GetUserStatus`, `Language Server`, `グレーゾーン`
**発生時刻：** 2026-01-26 14:00-14:40
**生存状態：** ⚠️ 真実を知ったけれど、リスクは消せませんの

---

> *「README は作者様の美しい幻想を教えてくれますわ*
> *Commit と Issue には真実が書いてありますの*
> *そして Network Tab には、作者様すら知られたくない秘密が隠されていますわ」*

---

> *愛聽秋墳鬼唱詩*
> *——あの配額の数字は、Language Server が闇の中で囁く詩句ですの。*
> *貴方は聞いてしまった。でも、聞くべきではなかったのですわ。*
